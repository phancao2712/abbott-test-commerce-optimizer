/*! Copyright 2025 Adobe
All Rights Reserved. */
import{Initializer as f}from"@dropins/tools/lib.js";import{events as l}from"@dropins/tools/event-bus.js";import{s as m}from"./state.js";function _(e,i,n,t){function o(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function y(r){try{c(t.next(r))}catch(p){s(p)}}function v(r){try{c(t.throw(r))}catch(p){s(p)}}function c(r){r.done?a(r.value):o(r.value).then(y,v)}c((t=t.apply(e,i||[])).next())})}function S(){return _(this,arguments,void 0,function*(e={}){if("PaymentServicesSDK"in window)return window.PaymentServicesSDK;if(yield w(e.customUrl||"https://payments-sdk.int.magento-payments.com/v0/3/PaymentSDK.js?v=0.3.5-alpha.9",e.scriptAttributes||{}),!("PaymentServicesSDK"in window))throw new Error("Script loaded, but Payment Services SDK not found.");return window.PaymentServicesSDK})}function w(e,{crossOrigin:i,integrity:n}){const t=document.createElement("script");return i!=null&&(t.crossOrigin=i),n!=null&&(t.integrity=n),new Promise((o,a)=>{t.src=e,t.async=!0,t.onload=()=>o(),t.onerror=s=>a(s),document.head.appendChild(t)})}var P=S;function A(e){m.value={paymentsSDK:e,status:"ready"}}function D(){m.value={paymentsSDK:null,status:"error"}}const d=new f({init:async e=>{const i={};d.config.setConfig({...i,...e}),P().then(async n=>{const t=new n({apiUrl:e==null?void 0:e.apiUrl,getCustomerToken:e==null?void 0:e.getCustomerToken});await t.Payment.init({location:"CHECKOUT"}),E(t),A(t)}).catch(n=>{console.error("Error occurred during payment services drop-in initialization.",n),D()})},listeners:()=>[]});function E(e){e.Payment.CreditCard.isAvailable()&&l.emit("payment-services/method-available",u.CREDIT_CARD),e.Payment.ApplePay.isAvailable()&&l.emit("payment-services/method-available",u.APPLE_PAY)}const C=d.config;var u=(e=>(e.CREDIT_CARD="payment_services_paypal_hosted_fields",e.SMART_BUTTONS="payment_services_paypal_smart_buttons",e.APPLE_PAY="payment_services_paypal_apple_pay",e.GOOGLE_PAY="payment_services_paypal_google_pay",e.VAULT="payment_services_paypal_vault",e))(u||{});export{u as P,C as c,d as i};
//# sourceMappingURL=method.js.map
